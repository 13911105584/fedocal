{% extends "master.html" %}

{% block title %} {{ calendar.calendar_name }} {% endblock %}

{% block content %}
<section>
{% if calendar %}
    <header>
        <h2>{{ calendar.calendar_name }}</h2>
        <p>{{ calendar.calendar_description }}</p>
    </header>
    <aside>
        {% autoescape off%}{{ curmonth_cal }}{% endautoescape %}
        <a href="{{url_for('calendar_fullday',
            calendar_name=calendar.calendar_name, year=prev_week.year,
            month=prev_week.month, day=prev_week.day)}}">
            &lt;&lt; Previous week
        </a> |
        <a href="{{url_for('calendar', calendar_name=calendar.calendar_name)}}">
            current week
        </a> |
        <a href="{{url_for('calendar_fullday',
            calendar_name=calendar.calendar_name, year=next_week.year,
            month=next_week.month, day=next_week.day)}}">
            Next week &gt;&gt;
        </a>
    </aside>
{% endif %}
<div id='agenda'>
    <table>
        <tr>
            <th class="time">{{ month }}</th>
            {% for day in weekdays %}
            <th> {{ day }}</th>
            {% endfor %}
        </tr>
        {% for time_entry in meetings |sort %}
        <tr>
            <th class="time">{{ time_entry }}</th>
            {% for meeting_list in meetings[time_entry] %}
                {% if meeting_list %}
                <td>
                    {% for meeting in meeting_list %}
                    <a class="event" href="{{ url_for('view_meeting',
                        meeting_id=meeting.meeting_id) }}">
                        {{ meeting.meeting_name }}
                     </a>
                     {% if not loop.last %}
                     -
                     {% endif %}
                    {% endfor %}
                </td>
                {% else %}
                <td></td>
                {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
